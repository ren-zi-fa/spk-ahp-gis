@startuml
title Sequence Diagram

actor User
participant "UI (Pairwaise)" as UI
participant "API Route (/api/matrix)" as API
participant "Prisma ORM" as Prisma
database "Database" as DB

User -> UI : Isi Matriks & Klik Simpan
UI -> API : POST /api/matrix (dengan body: criteriaMatrix, alternativeMatrix, analysisId)
API -> Prisma : deleteMany(CriteriaMatrix where analysisId)
Prisma -> DB : Hapus matrix kriteria lama

API -> Prisma : deleteMany(AlternativeMatrix where analysisId)
Prisma -> DB : Hapus matrix alternatif lama

API -> Prisma : create CriteriaMatrix
Prisma -> DB : Simpan data matrix kriteria

loop tiap matrix alternatif
  API -> Prisma : create AlternativeMatrix
  Prisma -> DB : Simpan matrix alternatif
end

API --> UI : JSON { ok: true, message: "Data berhasil disimpan" }

@enduml
